

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Design Principles</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'learn/principles/intro';</script>
    <link rel="canonical" href="https://cloud-katana.com/learn/principles/intro.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Attack Scenario Schema" href="../schema.html" />
    <link rel="prev" title="Azure Resource Manager Template" href="../../deploy/azure/arm.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/Logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/Logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../deploy/azure/intro.html">Deploy to Azure</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../deploy/azure/arm.html">Azure Resource Manager Template</a></li>



</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Internals</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schema.html">Attack Scenario Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulation.html">Request Simulations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Notebook Campaigns</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../simulate/azure/intro.html">Azure</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../simulate/azure/attackscenario-7dde2208-d4eb-480e-afa1-bad0ab7e861b.html">Admin promotion via Directory Role Permission Grant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../simulate/azure/attackscenario-7d918ee0-6928-48c5-8cf9-5dfb88abc7c4.html">Azure AD Light Discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../simulate/azure/attackscenario-81b67a16-5218-41e6-8c6d-1fc6a10b757a.html">Add New Password Credential to Azure AD Application and Read Mail</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Azure/Cloud-Katana" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Azure/Cloud-Katana/edit/main/docs/learn/principles/intro.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Azure/Cloud-Katana/issues/new?title=Issue%20on%20page%20%2Flearn/principles/intro.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/learn/principles/intro.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Design Principles</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-serverless-execution-model">A “serverless” execution model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compute-on-demand-as-a-web-api">Compute on-demand as a Web API</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#json-based-attack-scenarios">JSON based attack scenarios</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#orchestrated-stateful-execution">Orchestrated stateful execution</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secure-authentication-and-authorization">Secure Authentication and Authorization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#authentication">Authentication</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#authorization">Authorization</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#managed-identities-integration">Managed Identities Integration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#granular-access-control-to-azure-resources">Granular access control to Azure Resources</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#programming-language-agnostic-clients">Programming language agnostic clients</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cloud-and-on-prem-simulations">Cloud and on-prem simulations</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="design-principles">
<h1>Design Principles<a class="headerlink" href="#design-principles" title="Permalink to this heading">#</a></h1>
<p><img alt="" src="../../_images/KatanaDesign.png" /></p>
<ul class="simple">
<li><p>A serverless execution model</p></li>
<li><p>Compute on-demand as a web API</p></li>
<li><p>JSON based format to document attack scenarios</p></li>
<li><p>Orchestrated stateful execution</p></li>
<li><p>Secure authentication and authorization</p></li>
<li><p>Managed identity integration</p></li>
<li><p>Granular access control</p></li>
<li><p>Programming language agnostic clients</p></li>
<li><p>Cloud and on-prem coverage</p></li>
</ul>
<section id="a-serverless-execution-model">
<h2>A “serverless” execution model<a class="headerlink" href="#a-serverless-execution-model" title="Permalink to this heading">#</a></h2>
<p>Cloud Katana is a cloud-native solution that relies on platform as a service (PaaS) concepts to provide a simplified and scalable event-driven solution without worrying about deploying and maintaining the underlying infrastructure used to execute simulations.</p>
<p>To meet this need, Cloud Katana uses <a class="reference external" href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview">Azure Functions</a> to abstract the operating system layer from the code through a pay-per-execution billing model that automatically scales based on trigger invocations.</p>
<p><img alt="" src="../../_images/ServerlessExecutionModel.png" /></p>
</section>
<section id="compute-on-demand-as-a-web-api">
<h2>Compute on-demand as a Web API<a class="headerlink" href="#compute-on-demand-as-a-web-api" title="Permalink to this heading">#</a></h2>
<p>Simulation steps are represented as blocks of code called “functions” and invoked via HTTP requests through a built-in serverless web API.</p>
<p>With this feature one could simply send an HTTP request with information about the specific simulation and wait for the infrastructure underneath to process the request. Currently, all functions are written in PowerShell (subject to change) and categorized following the MITRE ATT&amp;CK framework.</p>
<p><img alt="" src="../../_images/ComputeOnDemandWebAPI.png" /></p>
</section>
<section id="json-based-attack-scenarios">
<h2>JSON based attack scenarios<a class="headerlink" href="#json-based-attack-scenarios" title="Permalink to this heading">#</a></h2>
<p>Every attack scenario is documented in JSON format to aggregate metadata such as title, description, ATT&amp;CK mappings, expected input and output and even preconditions to make sure we have the right permissions before running a simulation step. This facilitates the processing of every documented action programmatically and the automatic setup of a few other resources.</p>
<p><a class="reference internal" href="../schema.html"><span class="doc std std-doc">Explore Attack Scenarios Schema</span></a></p>
</section>
<section id="orchestrated-stateful-execution">
<h2>Orchestrated stateful execution<a class="headerlink" href="#orchestrated-stateful-execution" title="Permalink to this heading">#</a></h2>
<p>The project is also designed to handle state and ensure reliability across numerous attack simulations by using an extension of Azure functions named <a class="reference external" href="https://docs.microsoft.com/en-us/azure/azure-functions/durable/durable-functions-overview?tabs=powershell">durable functions</a>. This feature allows the orchestration and execution of scenarios where actions could depend on the state and output of other simulation steps. This is good to define specific attack paths as code.</p>
<p><img alt="" src="../../_images/OrchestratedStatefulExecution.png" /></p>
</section>
<section id="secure-authentication-and-authorization">
<h2>Secure Authentication and Authorization<a class="headerlink" href="#secure-authentication-and-authorization" title="Permalink to this heading">#</a></h2>
<p>Cloud Katana also enforces authentication and authorization best practices to secure the application.</p>
<section id="authentication">
<h3>Authentication<a class="headerlink" href="#authentication" title="Permalink to this heading">#</a></h3>
<p>The project uses the <a class="reference external" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-overview">Microsoft Identity Platform</a> (a.k.a Azure AD) as its identity provider to authenticate clients. This feature requires a registered Azure AD application which allows users to connect to the Azure Function app using OAuth authentication.</p>
<p>In addition, using an identity provider enables the following features:</p>
<ul class="simple">
<li><p>Conditional access policies</p></li>
<li><p>The use of <a class="reference external" href="https://docs.microsoft.com/en-us/azure/active-directory/authentication/concept-mfa-howitworks">multi-factor authentication</a></p></li>
<li><p>Single sign-on (SSO)</p></li>
</ul>
<p><img alt="" src="../../_images/DeviceAuthGrantFlow.png" /></p>
</section>
<section id="authorization">
<h3>Authorization<a class="headerlink" href="#authorization" title="Permalink to this heading">#</a></h3>
<p>Besides enforcing users to authenticate before executing simulations, the project also implements “Application Role Assignments” to restrict access to selected users. This allows organizations to select who can use the project in their environments.</p>
</section>
</section>
<section id="managed-identities-integration">
<h2>Managed Identities Integration<a class="headerlink" href="#managed-identities-integration" title="Permalink to this heading">#</a></h2>
<p>Furthermore, when executing simulations in Azure, Cloud Katana uses a user-assigned managed identity to access and interact with other Azure AD-protected resources. One of the advantages of managed identities is that it removes the need to provision or rotate any secrets.</p>
<p><img alt="" src="../../_images/UserAssignedManagedIdentity.png" /></p>
</section>
<section id="granular-access-control-to-azure-resources">
<h2>Granular access control to Azure Resources<a class="headerlink" href="#granular-access-control-to-azure-resources" title="Permalink to this heading">#</a></h2>
<p>In addition, access to Azure resources is defined by the permissions assigned to the managed identity. We currently cover Azure based scenarios. Therefore, we use permissions associated with <a class="reference external" href="https://docs.microsoft.com/en-us/graph/permissions-reference">each major set of Microsoft Graph APIs</a> to control access to specific Azure resources.</p>
<p>For example, if we wanted to use Cloud Katana to add credentials to an application, we would need to grant the <a class="reference external" href="https://docs.microsoft.com/en-us/graph/api/application-addpassword?view=graph-rest-1.0&amp;tabs=http#permissions">following permissions</a> (From least to most privileged) to the managed identity:</p>
<ul class="simple">
<li><p>Application.ReadWrite.OwnedBy</p></li>
<li><p>Application.Read.Write.All</p></li>
</ul>
<p><img alt="" src="../../_images/GranularAccessControl.png" /></p>
</section>
<section id="programming-language-agnostic-clients">
<h2>Programming language agnostic clients<a class="headerlink" href="#programming-language-agnostic-clients" title="Permalink to this heading">#</a></h2>
<p>Another feature that makes Cloud Katana a very powerful tool is the flexibility to use any programming language to request simulations. If the client used to interact with Cloud Katana can handle the Azure AD authentication process, it does not matter how the simulation is requested.</p>
<p><img alt="" src="../../_images/ProgrammingLanguageAgnosticClient.png" /></p>
<p>Microsoft Authentication libraries are available via PowerShell as <a class="reference external" href="https://github.com/AzureAD/MSAL.PS">MSAL.PS</a> and Python as <a class="reference external" href="https://pypi.org/project/msal/">MSAL</a> . We could also use other open-source projects such as <a class="reference external" href="https://jupyter.org/">Jupyter Notebooks</a> to create repetitive templates to show the execution of simulations and share the process with other security researchers.</p>
<p><img alt="" src="../../_images/JupyterNotebookSimulations.png" /></p>
</section>
<section id="cloud-and-on-prem-simulations">
<h2>Cloud and on-prem simulations<a class="headerlink" href="#cloud-and-on-prem-simulations" title="Permalink to this heading">#</a></h2>
<p>Finally, we are currently experimenting with <a class="reference external" href="https://docs.microsoft.com/en-us/azure/app-service/app-service-hybrid-connections">Azure App Service Hybrid Connections</a> to not only run simulations in the cloud, but also on-premises. Hybrid Connections use a <a class="reference external" href="https://docs.microsoft.com/en-us/azure/azure-relay/relay-what-is-it">relay agent</a> to securely expose services that run on-premises to the public cloud.  The relay agent sits in the middle between the on-prem server and the Cloud Katana Azure Function app.</p>
<p>A relay agent ( <a class="reference external" href="https://docs.microsoft.com/en-us/azure/app-service/app-service-hybrid-connections#hybrid-connection-manager">Hybrid Connection Manager (HCM)</a> ) is set up on the on-prem server and configured to call out to the Azure Relay over port 443. The Cloud Katana function app then connects to the Azure Relay to interact with the on-prem server and execute simulations locally. The connection uses TLS 1.2 for security and shared access signature (SAS) keys for authentication and authorization.</p>
<p><img alt="" src="../../_images/OnPremSimulations.png" /></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "Azure/Cloud-Katana",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./learn\principles"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../../deploy/azure/arm.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Azure Resource Manager Template</p>
      </div>
    </a>
    <a class="right-next"
       href="../schema.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Attack Scenario Schema</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-serverless-execution-model">A “serverless” execution model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compute-on-demand-as-a-web-api">Compute on-demand as a Web API</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#json-based-attack-scenarios">JSON based attack scenarios</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#orchestrated-stateful-execution">Orchestrated stateful execution</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#secure-authentication-and-authorization">Secure Authentication and Authorization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#authentication">Authentication</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#authorization">Authorization</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#managed-identities-integration">Managed Identities Integration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#granular-access-control-to-azure-resources">Granular access control to Azure Resources</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#programming-language-agnostic-clients">Programming language agnostic clients</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cloud-and-on-prem-simulations">Cloud and on-prem simulations</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Microsoft Corporation
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>